{% extends "events/structure.html" %}
{% load static %}
{% block title %}My List{% endblock title %}

{% block content %}
{% comment %} level-4 Lists {% endcomment %}
<!-- Events Section -->
 {% if event_list %}
<section class="bg-gray-100 px-4 py-8">
  <div class="space-y-6 flex flex-col items-center">
     <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
  {% for event in event_list %}
      <!-- Event Row 1 -->
       <div class="bg-gradient-to-r from-indigo-600 to-purple-600 rounded-xl p-2">
        <div class=" bg-white text-white shadow-md rounded-lg p-4">
      <div class="mb-2 text-center">
        <h3 class="flex justify-center text-5xl border-b-2	pb-5 font-semibold text-black">{{event.name}}</h3>
      </div>
      <div class="flex justify-center mb-4 text-black">
        <p class="text-lg text-gray-800"><span class="font-semibold">Description :</span> {{event.description}}</p>
      </div>
      <div class="flex justify-center  mb-4 text-black">
                      <p class="text-lg font-semibold text-gray-800">Date :</p>
                      <p class="text-lg font-semibold text-gray-800">
                        {{event.date|date:"F j, Y"}}
                      </p>
                    </div>
      <div class="flex justify-center gap-10">
        <a href="{% url 'event_details' event.id %}" class="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition text-center">Details</a>

        {% if current_user.groups.first.name == "Participant" %}
          {% if current_user in event.participants.all %}
            <span class="px-4 py-2 bg-gray-400 text-white rounded">Already selected</span>
          {% else %}
            <form method="post" action="{% url 'rsvp-event' event.id %}">
              {% csrf_token %}
              <button type="submit" class="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition">
                Interested
              </button>
            </form>
          {% endif %}
        {% else %}
          <a href='{% url "update_event" event.id %}' class="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition">
            Edit
          </a>
        {% endif %}

      </div>
    </div>
       </div>
    
    {% endfor %}
</div>
{% else %}
      {% comment %} Empty List {% endcomment %}
  {% include 'empty_list.html' with message="Your RSVP List is Empty!"%}
{% endif %}
  </div>
</section>
{% endblock content %}
